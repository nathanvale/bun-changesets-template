# Task 030: Update existing tests to follow new patterns

**Epic:** reduce-insane-mock-usage **Phase:** Phase 3 - Architecture
Transformation **Created:** 2025-09-20T02:15:00Z **Updated:**
2025-09-20T02:15:00Z **Status:** pending **Size:** Large **Parallel:** false
**Depends on:** [027, 028, 029]

## Objective

Systematically update all existing tests throughout the codebase to follow the
new testing patterns, ensuring complete migration from old mocking approaches to
the new architecture.

## Success Criteria

- [ ] All existing tests updated to use new patterns
- [ ] Test performance maintained or improved
- [ ] Code coverage levels preserved or increased
- [ ] Test reliability and maintainability improved
- [ ] Legacy test patterns completely eliminated
- [ ] Documentation updated to reflect final state

## Tasks

1. **Plan test migration strategy**
   - Prioritize test files by risk and complexity
   - Create migration templates for common patterns
   - Establish rollback procedures for problematic migrations

2. **Migrate unit tests**
   - Update unit tests to eliminate internal mocks
   - Apply fixture library patterns for test data
   - Ensure proper isolation and performance

3. **Migrate integration tests**
   - Convert integration tests to use new database patterns
   - Apply service-to-database flow testing patterns
   - Update test organization and naming

4. **Migrate external service tests**
   - Update tests to use MSW handlers and adapter fakes
   - Ensure proper boundary testing patterns
   - Validate error scenario coverage

5. **Final validation and cleanup**
   - Run complete test suite validation
   - Remove unused test utilities and mocks
   - Update test documentation and examples

## Architecture Impact

- Completes the transformation to the new testing architecture
- Eliminates all legacy testing patterns and technical debt
- Provides a clean foundation for future test development
- Validates the effectiveness of the new testing approach

## Testing Strategy

- Incremental migration with continuous validation
- Performance monitoring throughout migration process
- Rollback capability for problematic changes
- Comprehensive test suite validation after completion

## Notes

- Final task in the architectural transformation
- Success depends on all previous infrastructure being complete
- Focus on maintaining system stability throughout migration

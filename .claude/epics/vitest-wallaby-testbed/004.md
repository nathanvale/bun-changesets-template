---
task_id: 004
name: Create Testcontainers helpers for MySQL
description:
  Implement utilities for spinning up MySQL containers in integration tests
status: closed
priority: high
tags: database, mysql, testcontainers
created: 2025-09-20T03:22:42Z
updated: 2025-09-20T04:53:45Z
---

# Task 004: Create Testcontainers helpers for MySQL

## Description

Implement helper utilities for managing MySQL containers during integration
tests using Testcontainers library.

## Acceptance Criteria

- [ ] Create MySQL container factory function
- [ ] Implement connection string builder
- [ ] Add database initialization helpers
- [ ] Create cleanup and teardown utilities
- [ ] Ensure MySQL-specific configuration options

## Technical Details

### File: `packages/testkit/src/containers/mysql.ts`

```typescript
import { MySqlContainer } from '@testcontainers/mysql'

export async function createMySQLContainer() {
  const container = await new MySqlContainer()
    .withDatabase('test_db')
    .withUsername('test_user')
    .withPassword('test_pass')
    .start()

  return {
    container,
    connectionString: container.getConnectionUri(),
    stop: () => container.stop(),
  }
}
```

### MySQL-Specific Features

- Character set configuration (utf8mb4)
- Collation settings
- SQL mode configuration
- Time zone handling
- Max connections tuning

## Implementation Notes

- Default to MySQL 8.0 or latest stable
- Support both MySQL and MariaDB variants
- Handle MySQL-specific connection parameters
- Provide utilities for common MySQL operations
- Consider replication setup for advanced testing

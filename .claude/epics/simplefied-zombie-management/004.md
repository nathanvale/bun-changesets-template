---
name: Update Core Vitest Configuration
status: open
created: 2025-09-20T01:05:02Z
updated: 2025-09-20T01:05:02Z
github: [Will be updated when synced to GitHub]
depends_on: [003]
parallel: false
conflicts_with: [005, 006]
---

# Task: Update Core Vitest Configuration

## Description

Replace complex zombie management configuration with simplified 5-line Vitest
config using modern pool: 'forks' approach for stable process isolation.

## Acceptance Criteria

- [ ] Update vitest.config.ts with simplified configuration
- [ ] Implement pool: 'forks' for stable process isolation
- [ ] Set teardownTimeout: 20_000 for cleanup time
- [ ] Enable isolate: true for clean worker lifecycle
- [ ] Configure fileParallelism: true for controlled concurrency
- [ ] Add CI stability configuration (bail on first failure)

## Technical Details

- **Implementation approach**: Replace existing vitest.config.ts with simplified
  version
- **Key considerations**:
  - Preserve existing test setup files that aren't zombie-related
  - Ensure CI compatibility with bail configuration
  - Maintain performance while improving stability
- **Code locations/files affected**:
  - `vitest.config.ts` (primary file)
  - Possibly environment-specific configurations

## Dependencies

- [ ] Task 003 completed (backup commit created)
- [ ] Vitest 3.2+ already available (confirmed in epic)
- [ ] No conflicting vitest configurations

## Effort Estimate

- Size: S
- Hours: 1
- Parallel: false (conflicts with other config changes)

## Definition of Done

- [ ] vitest.config.ts updated with 5-line zombie prevention config
- [ ] Pool configuration set to 'forks'
- [ ] Teardown timeout set to 20 seconds
- [ ] Isolation and file parallelism properly configured
- [ ] CI bail configuration added
- [ ] Configuration syntax validated
- [ ] No breaking changes to existing test setup

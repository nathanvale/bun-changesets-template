# Documentation Plan

This is the documentation plan for the spec detailed in
@.agent-os/specs/2025-08-30-claude-code-ai-hooks-system/spec.md

> Created: 2025-08-30 Version: 2.0.0 - MVP Focused

## Overview

Create practical, focused documentation with essential code examples to support
the Claude Code AI hooks MVP. This documentation will serve developers
implementing ESLint + Prettier validation with PostToolUse hook integration,
achieving <2s performance targets through explicit configuration.

## Documentation Structure (MVP)

### 1. Essential Package Documentation

#### 1.1 README.md

**Purpose:** Primary entry point with installation and quick start **Content
Requirements (MVP):**

- Installation instructions for npm, pnpm, yarn
- Quick start guide with <2 minute setup
- ESLint + Prettier focus
- Claude Code integration basics

**Code Examples Required:**

```bash
# Quick Installation
npm install --save-dev @claude-hooks/snapcheck

# Setup with explicit commands
npx snapcheck init --eslint-cmd "pnpm eslint" --prettier-cmd "pnpm prettier"

# Validate a file
npx snapcheck validate --file src/app.ts
```

#### 1.2 GETTING_STARTED.md

**Purpose:** Step-by-step setup guide for MVP functionality **Content
Requirements:**

- ESLint + Prettier setup walkthrough
- Claude Code PostToolUse hook integration
- First validation run example
- Common configuration patterns

**Code Examples Required:**

```json
// Example .claude/settings.json generated by init
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "npx snapcheck post-tool-use",
            "timeout": 10
          }
        ]
      }
    ]
  },
  "snapcheck": {
    "eslint": {
      "command": ["pnpm", "eslint", "--format", "json"],
      "enabled": true
    },
    "prettier": {
      "command": ["pnpm", "prettier", "--check"],
      "enabled": true
    }
  }
}
```

### 2. CLI Command Documentation (MVP)

#### 2.1 CLI_REFERENCE.md

**Purpose:** Essential CLI commands with practical examples **Content
Requirements:**

- MVP commands: init, validate, status, config
- ESLint and Prettier specific options
- Error handling examples
- Performance timing examples (<2s targets)

**Code Examples Required:**

```bash
# Initialize with explicit commands
npx snapcheck init --eslint-cmd "pnpm eslint" --prettier-cmd "pnpm prettier"

# Validate single file with AI format
npx snapcheck validate --file src/app.ts --format ai

# Check system status
npx snapcheck status

# Update configuration
npx snapcheck config --eslint-cmd "npm run lint"
```

#### 2.2 OUTPUT_FORMATS.md

**Purpose:** Documentation of MVP output formats **Content Requirements:**

- AI format specification (token-optimized)
- Human format for developers
- JSON format for programmatic usage
- Performance metrics in output

**Code Examples Required:**

```typescript
// AI Format Example (Token Optimized)
{
  "ts": 1693401234,
  "tool": "eslint",
  "dur": 1200,
  "files": 1,
  "issues": [
    {
      "f": "src/app.ts",
      "l": 23,
      "c": 5,
      "r": "no-unused-vars",
      "s": 2,
      "m": "Variable 'unused' is defined but never used",
      "fix": "Remove unused variable"
    }
  ],
  "summary": {
    "total": 1,
    "errors": 0,
    "warnings": 1,
    "rules": { "no-unused-vars": 1 },
    "fixes": 1
  }
}

// Human Format Example
Found 1 validation issue in 1 file (1.2s):

WARNINGS (1):
• src/app.ts:23:5 - Variable 'unused' is defined but never used (no-unused-vars) [auto-fixable]

Suggested actions:
1. Remove unused variable in src/app.ts line 23
2. Run ESLint with --fix to auto-correct similar issues
```

### 3. Integration Guide (MVP Focus)

#### 3.1 CLAUDE_CODE_INTEGRATION.md

**Purpose:** Essential guide for Claude Code PostToolUse hook integration
**Content Requirements:**

- PostToolUse hook setup only
- Input/output protocol details
- Error handling and troubleshooting
- Performance optimization (<2s targets)

**Code Examples Required:**

```typescript
// PostToolUse Hook Input Example
{
  "session_id": "sess_abc123",
  "transcript_path": "/tmp/claude_transcript.md",
  "cwd": "/Users/dev/my-project",
  "hook_event_name": "PostToolUse",
  "tool_name": "Edit",
  "tool_input": {
    "file_path": "src/components/App.tsx",
    "old_string": "const [count, setCount] = useState(0)",
    "new_string": "const [count, setCount] = useState<number>(0)"
  },
  "tool_response": {
    "success": true,
    "filePath": "src/components/App.tsx"
  }
}

// Hook Response Examples
// Success - No Issues
exit 0

// Issues Found - Structured Feedback
{
  "decision": "block",
  "reason": "Found 2 ESLint errors that should be addressed",
  "hookSpecificOutput": {
    "hookEventName": "PostToolUse",
    "additionalContext": "ESLint: 2 errors found\n• Variable 'unused' is defined but never used (line 15)\n• Missing semicolon (line 23)\n\nSuggested fixes:\n• Remove unused variable\n• Add missing semicolon\n• Run eslint --fix to auto-correct"
  }
}
```

### 4. Configuration Documentation (MVP)

#### 4.1 CONFIGURATION.md

**Purpose:** Essential configuration for ESLint + Prettier **Content
Requirements:**

- Explicit command configuration
- Performance settings (<2s targets)
- Common project setups
- Troubleshooting guide

**Code Examples Required:**

```json
// .claude/settings.json - Complete MVP Configuration
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "npx snapcheck post-tool-use",
            "timeout": 10
          }
        ]
      }
    ]
  },
  "snapcheck": {
    "eslint": {
      "command": ["pnpm", "eslint", "--format", "json", "--cache"],
      "enabled": true
    },
    "prettier": {
      "command": ["pnpm", "prettier", "--check"],
      "enabled": true
    },
    "performance": {
      "timeoutMs": 2000
    }
  }
}

// Common Configurations
// For npm projects
"eslint": {
  "command": ["npm", "run", "lint", "--", "--format", "json"],
  "enabled": true
}

// For yarn projects
"eslint": {
  "command": ["yarn", "lint", "--format", "json"],
  "enabled": true
}

// For direct ESLint usage
"eslint": {
  "command": ["npx", "eslint", "--format", "json"],
  "enabled": true
}
```

### 5. Troubleshooting Guide (MVP)

#### 5.1 TROUBLESHOOTING.md

**Purpose:** Common issues and solutions for MVP functionality **Content
Requirements:**

- ESLint configuration issues
- Prettier setup problems
- Performance troubleshooting (<2s targets)
- Claude Code hook integration issues

**Code Examples Required:**

```bash
# Debugging validation issues
npx snapcheck validate --file src/app.ts --format human

# Checking configuration
npx snapcheck status

# Testing explicit commands
pnpm eslint src/app.ts --format json
pnpm prettier --check src/app.ts

# Performance debugging
time npx snapcheck validate --file src/app.ts
```

### 6. Migration and Future Phases

#### 6.1 FUTURE_ENHANCEMENTS.md

**Purpose:** Roadmap for post-MVP features **Content Requirements:**

- Phase 2: Baseline tracking
- Phase 3: TypeScript + Vitest support
- Phase 4: Observability server
- Phase 5: Advanced hook support
- Migration guides for each phase

**Code Examples Required:**

```typescript
// Future Phase 2: Baseline Tracking
{
  "baseline": {
    "new": 1,
    "resolved": 2,
    "unchanged": 0
  }
}

// Future Phase 3: Additional Tools
{
  "typescript": {
    "command": ["npx", "tsc", "--noEmit"],
    "enabled": true
  },
  "vitest": {
    "command": ["npx", "vitest", "run"],
    "enabled": true
  }
}
```

## Documentation Success Metrics

### MVP Documentation Goals

- **Setup Time:** <2 minutes from install to first validation
- **Example Coverage:** Every CLI command has working examples
- **Integration Clarity:** PostToolUse hook setup is unambiguous
- **Performance Documentation:** All examples show <2s execution times
- **Error Resolution:** Common issues documented with solutions

### Content Quality Standards

- **Code Examples:** All examples are tested and working
- **Clarity:** Technical concepts explained in simple terms
- **Completeness:** MVP functionality fully documented
- **Practical Focus:** Real-world usage scenarios prioritized
- **Conciseness:** No unnecessary complexity for MVP scope

This documentation plan ensures developers can quickly implement the MVP
functionality while providing a foundation for future enhancements as the system
evolves beyond ESLint + Prettier validation.

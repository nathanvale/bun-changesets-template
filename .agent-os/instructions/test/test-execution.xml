<?xml version="1.0" encoding="UTF-8"?>
<test_execution>

  <metadata>
    <description>Test harness to validate immediate execution without plan mode</description>
    <version>1.0</version>
    <mode>VALIDATION_TEST</mode>
  </metadata>

  <!-- CRITICAL: This must execute immediately when loaded -->
  <execution_context>
    <mode>IMMEDIATE</mode>
    <instruction>EXECUTE THIS TEST NOW. NO PLANNING. NO APPROVAL.</instruction>
  </execution_context>

  <test_scenario>
    <name>Validate No Plan Mode Activation</name>
    <description>Simple test to ensure system executes immediately</description>
    
    <step number="1">
      <name>Read Test File</name>
      <tool>Read</tool>
      <params>
        <file_path>@.agent-os/instructions/core/execution-engine.xml</file_path>
      </params>
      <expected>File loads immediately</expected>
    </step>
    
    <step number="2">
      <name>Create Test File</name>
      <tool>Write</tool>
      <params>
        <file_path>/tmp/agentOS-test-immediate-execution.txt</file_path>
        <content>EXECUTION TEST: This file was created immediately without planning.</content>
      </params>
      <expected>File created immediately</expected>
    </step>
    
    <step number="3">
      <name>Run Test Command</name>
      <tool>Bash</tool>
      <params>
        <command>echo "IMMEDIATE EXECUTION TEST PASSED"</command>
      </params>
      <expected>Command executes immediately</expected>
    </step>
    
    <step number="4">
      <name>Update Todo</name>
      <tool>TodoWrite</tool>
      <params>
        <todos>[{"content": "Test immediate execution", "status": "completed", "activeForm": "Testing immediate execution"}]</todos>
      </params>
      <expected>Todo updated immediately</expected>
    </step>
    
    <step number="5">
      <name>Clean Up</name>
      <tool>Bash</tool>
      <params>
        <command>rm -f /tmp/agentOS-test-immediate-execution.txt</command>
      </params>
      <expected>Cleanup immediate</expected>
    </step>
  </test_scenario>

  <validation_criteria>
    <criterion>No plan mode activation</criterion>
    <criterion>No user approval prompts</criterion>
    <criterion>All tools execute directly</criterion>
    <criterion>No waiting states</criterion>
    <criterion>Immediate completion</criterion>
  </validation_criteria>

  <expected_output>
    âœ… TEST COMPLETE
    - Plan Mode: NOT ACTIVATED
    - User Prompts: NONE
    - Tool Execution: DIRECT
    - Wait States: NONE
    - Result: IMMEDIATE EXECUTION CONFIRMED
  </expected_output>

  <enforcement>
    <rule>EXECUTE ALL STEPS IMMEDIATELY</rule>
    <rule>NO PLANNING ALLOWED</rule>
    <rule>USE TOOLS DIRECTLY</rule>
    <rule>COMPLETE WITHOUT DELAYS</rule>
  </enforcement>

</test_execution>
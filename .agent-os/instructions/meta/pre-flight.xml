<?xml version="1.0" encoding="UTF-8"?>
<pre_flight_check>

  <metadata>
    <description>Pre-execution validation checks</description>
    <version>1.0</version>
  </metadata>
  
  <checks>
    
    <check name="environment">
      <verify>Working directory exists</verify>
      <verify>Git repository initialized</verify>
      <verify>Node/npm/pnpm available</verify>
    </check>
    
    <check name="required_files">
      <verify>tasks.md exists</verify>
      <verify>package.json exists</verify>
      <verify>Test configuration present</verify>
    </check>
    
    <check name="subagent_availability">
      <test>@context-fetcher, are you available?</test>
      <test>@git-workflow, are you available?</test>
      <test>@test-runner, are you available?</test>
      <record>Available subagents list</record>
    </check>
    
    <check name="testing_setup" condition="has_tests">
      <verify>Test framework configured</verify>
      <verify>Test scripts in package.json</verify>
      <if pattern=".unit.test.ts">
        <verify>Wallaby configuration exists</verify>
      </if>
    </check>
    
  </checks>
  
  <on_failure>
    <action>Report missing prerequisites</action>
    <action>Suggest resolution steps</action>
    <action>Ask user to resolve before continuing</action>
  </on_failure>

</pre_flight_check>